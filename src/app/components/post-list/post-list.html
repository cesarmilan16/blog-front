<div class="fixed bottom-8 right-8 group">

    <button type="button" routerLink="/create" class="
            bg-blue-600 text-white w-14 h-14 p-0 rounded-full shadow-xl
            flex items-center justify-center 
            hover:bg-blue-700 focus:outline-none focus:ring-4 focus:ring-offset-2 focus:ring-blue-500
            transition duration-300 transform hover:scale-105
            cursor-pointer peer
        ">
        <span class="sr-only">Crear Nuevo Post</span>

        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-6 h-6"
            aria-hidden="true">
            <path fill-rule="evenodd"
                d="M12 3.75a.75.75 0 01.75.75v6.75h6.75a.75.75 0 010 1.5h-6.75v6.75a.75.75 0 01-1.5 0v-6.75H4.5a.75.75 0 010-1.5h6.75V4.5a.75.75 0 01.75-.75z"
                clip-rule="evenodd" />
        </svg>
    </button>

    <div class="
            absolute right-full top-1/2 transform -translate-y-1/2 
            bg-gray-800 text-white text-xs rounded py-1 px-2 mr-3 
            whitespace-nowrap opacity-0 pointer-events-none 
            transition duration-300
            group-hover:opacity-100 group-hover:block
        ">
        Crear Nuevo Post
    </div>

</div>

<div class="max-w-5xl mx-auto py-8 px-4 sm:px-6 lg:px-8
            grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">

    @for (post of (postList$ | async); track post.id) {

    <div class="bg-white shadow-lg rounded-xl p-6 mb-6 hover:shadow-xl transition duration-300">
        <a [routerLink]="['/post', post.id]" class="post-link-card">

            <!-- TÍTULO -->
            <h2 class="text-2xl font-semibold text-gray-800 mb-2">
                {{ post.title }}
            </h2>

            <!-- CONTENIDO NORMAL -->
            @if (editingId !== post.id) {
            <p class="text-base text-gray-700 mb-4 line-clamp-4">
                {{ post.content }}
            </p>
            }

            <!-- EDITOR INLINE -->
            @if (editingId === post.id) {
            <div class="space-y-3 mb-4">
                <input type="text" [(ngModel)]="editTitle" class="w-full border rounded p-2" placeholder="Título" />

                <textarea rows="4" [(ngModel)]="editContent" class="w-full border rounded p-2"
                    placeholder="Contenido"></textarea>
            </div>
            }

            <!-- BOTONES -->
            <div class="flex gap-4 mt-4">

                <!-- SI ESTÁ EDITANDO → GUARDAR / CANCELAR -->
                @if (editingId === post.id) {

                <button type="button" class="px-4 py-2 bg-green-600 text-white font-semibold rounded hover:bg-green-700"
                    (click)="saveEdit()" [disabled]="isSaving">
                    Guardar
                </button>

                <button type="button" class="px-4 py-2 bg-gray-500 text-white font-semibold rounded hover:bg-gray-600"
                    (click)="cancelEdit()" [disabled]="isSaving">
                    Cancelar
                </button>

                } @else {

                <!-- BOTÓN EDITAR -->
                <button type="button"
                    class="px-4 py-2 bg-yellow-500 text-white font-semibold rounded hover:bg-yellow-600"
                    (click)="startEdit(post)">
                    Editar
                </button>

                <!-- BOTÓN ELIMINAR -->
                <button type="button" class="px-4 py-2 bg-red-600 text-white font-semibold rounded hover:bg-red-700"
                    (click)="deletePost(post.id!)">
                    Eliminar
                </button>

                }

            </div>
        </a>
    </div>

    } @empty {
    <p class="text-center text-gray-500 text-lg">No hay posts disponibles para mostrar.</p>
    }
</div>