<div class="max-w-4xl mx-auto py-8 px-4 sm:px-6 lg:px-8">

    @for (post of (postList$ | async); track post.id) {

        <div class="bg-white shadow-lg rounded-xl p-6 mb-6 hover:shadow-xl transition duration-300">

            <!-- TÍTULO -->
            <h2 class="text-2xl font-semibold text-gray-800 mb-2">
                {{ post.title }}
            </h2>

            <!-- CONTENIDO NORMAL -->
            @if (editingId !== post.id) {
                <p class="text-base text-gray-700 mb-4 line-clamp-4">
                    {{ post.content }}
                </p>
            }

            <!-- EDITOR INLINE -->
            @if (editingId === post.id) {
                <div class="space-y-3 mb-4">
                    <input
                        type="text"
                        [(ngModel)]="editTitle"
                        class="w-full border rounded p-2"
                        placeholder="Título"
                    />

                    <textarea
                        rows="4"
                        [(ngModel)]="editContent"
                        class="w-full border rounded p-2"
                        placeholder="Contenido"
                    ></textarea>
                </div>
            }

            <!-- BOTONES -->
            <div class="flex gap-4 mt-4">

                <!-- SI ESTÁ EDITANDO → GUARDAR / CANCELAR -->
                @if (editingId === post.id) {

                    <button
                        type="button"
                        class="px-4 py-2 bg-green-600 text-white font-semibold rounded hover:bg-green-700"
                        (click)="saveEdit()"
                        [disabled]="isSaving"
                    >
                        Guardar
                    </button>

                    <button
                        type="button"
                        class="px-4 py-2 bg-gray-500 text-white font-semibold rounded hover:bg-gray-600"
                        (click)="cancelEdit()"
                        [disabled]="isSaving"
                    >
                        Cancelar
                    </button>

                } @else {

                    <!-- BOTÓN EDITAR -->
                    <button
                        type="button"
                        class="px-4 py-2 bg-yellow-500 text-white font-semibold rounded hover:bg-yellow-600"
                        (click)="startEdit(post)"
                    >
                        Editar
                    </button>

                    <!-- BOTÓN ELIMINAR -->
                    <button
                        type="button"
                        class="px-4 py-2 bg-red-600 text-white font-semibold rounded hover:bg-red-700"
                        (click)="deletePost(post.id!)"
                    >
                        Eliminar
                    </button>

                }

            </div>

        </div>

    } @empty {
        <p class="text-center text-gray-500 text-lg">No hay posts disponibles para mostrar.</p>
    }
</div>
